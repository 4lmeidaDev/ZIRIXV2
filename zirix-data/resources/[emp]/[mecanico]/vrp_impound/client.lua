-----------------------------------------------------------------------------------------------------------------------------------------
-- VRP
-----------------------------------------------------------------------------------------------------------------------------------------
local Tunnel = module("vrp","lib/Tunnel")
local Proxy = module("vrp","lib/Proxy")
vRP = Proxy.getInterface("vRP")
-----------------------------------------------------------------------------------------------------------------------------------------
-- CONEXÃO
-----------------------------------------------------------------------------------------------------------------------------------------
src = {}
Tunnel.bindInterface("vrp_impound",src)
vSERVER = Tunnel.getInterface("vrp_impound")
-----------------------------------------------------------------------------------------------------------------------------------------
-- VARIÁVEIS
-----------------------------------------------------------------------------------------------------------------------------------------
local services = {
	{ -217.69,-1360.3,31.26 },
	{ 1223.70,2710.55,38.00 },
	{ 127.61,6608.55,31.94 }
}
-----------------------------------------------------------------------------------------------------------------------------------------
-- IMPOUND
-----------------------------------------------------------------------------------------------------------------------------------------
Citizen.CreateThread(function()
	while true do
		Citizen.Wait(5)
		local ped = PlayerPedId()
		if not IsPedInAnyVehicle(ped) then
			local x,y,z = table.unpack(GetEntityCoords(ped))
			for k,v in pairs(services) do
				local distance = Vdist(x,y,z,v[1],v[2],v[3])
				if distance <= 50 then
					DrawMarker(23,v[1],v[2],v[3]-0.95,0,0,0,0,0,0,10.0,10.0,1.0,0,150,0,20,0,0,0,0)
					if distance <= 5 then
						if IsControlJustPressed(1,38) then
							vSERVER.checkImpound()
						end
					end
				end
			end
		end
	end
end)